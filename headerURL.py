#!/usr/bin/env python
import urllib.request, urllib.parse, urllib.error
import re
from urllib.request import FancyURLopener
import time


def header_reader(url):
	'''
	
	This funcion will give information about the server header such as the WebserverOS and version and checks the status of the url
	
	'''
	result = open("result.txt", "w")
	print(col.bold+" \n [!] Identification of the backend technologies."+col.end)
	result.write(" [!] Identification of the backend technologies. \n")
	opener = urllib.request.urlopen(url)
	#print(opener.code)
	if opener.code == 200:
		 print(col.green+" [!] Status code: 200 OK"+col.end)
		 result.write(" [!] Status code: 200 OK \n")
	if opener.code == 404:
		 print(col.red+" [!] Page was not found! Please check the URL \n"+col.end)
		 result.write(" [!] Page was not found! Please check the URL \n")
		 
	#SERVER
	Server = opener.headers.get(HTTP_HEADER.SERVER)
	
	# HOST 
	Host = url.split("/")[2]
	print(col.green+" [!] Host: " + str(Host) +col.end)
	result.write(" [!] Host: " + str(Host) + "\n")
	print(col.green+" [!] WebServer: " + str(Server) +col.end)
	result.write(" [!] WebServer: " + str(Server) + "\n")
	
	result.close()
	

class colors:
        def __init__(self):
                self.bold = "\033[1m"
                self.blue = "\033[94m"
                self.red = "\033[91m"
                self.green = "\033[92m"
                self.end = "\033[0m"
                
col = colors()

#User agents when sending a Request
class UserAgent(FancyURLopener):
	version = 'Mozilla/5.0 (X11; Linux x86_64; rv:78.0) Gecko/20100101 Firefox/78.0'

useragent = UserAgent()

class HTTP_HEADER:
    HOST = "Host"
    SERVER = "Server"

